<fieldset>
  <p><img class='circle' src="http://www.gravatar.com/avatar/<%= current_user.gravatar_hash %>?s=150&d=mm"></p>
  <p><%= link_to "Update Profile", edit_user_path(@user), class: 'button secondary tiny' %></p>
  <p>Username: <%= @user.username %></p>
  <p>Email: <%= @user.email %></p>
  <p>Cellphone: <%= @user.cellphone %></p>
  <% unless @location_settings %>
    <p>No locations available. <%= link_to "Add a location", new_location_setting_path %></p>
  <% else %>
    <p>Locations:</p>
    <% @location_settings.each do |location| %>
      <div class="button-bar">
      <h5><%= link_to location.name, location_setting_path(location)%></h5><%= link_to "Edit", edit_location_setting_path(location), class: 'button tiny' %><%= link_to 'Delete', location, method: :delete, class: 'button tiny' %>
      </div>
    <% end %>
    <%= link_to "Add a location", new_location_setting_path %>
  <% end %>

  <% if @user.routes.saved.any? %>
    <table>
      <h5>Saved Routes</h5>
      <tr>
        <td>Name</td>
        <td>Distance</td>
      </tr>
      <% @user.routes.saved.each do |route| %>
        <tr>
          <td><%= link_to route.name, route_path(route) %></td>
          <td><%= route.distance %> miles</td>
          <td><input id='route-id' type='hidden' value='<%= route.id %>'><div class="button tiny alert delete-route">Delete</div></td>
        </tr>
      <% end %>
    </table>
  <% end %>

  <% if @user.notified_events.active.any? %>
    <table>
      <h5>Notified Events</h5>
      <tr>
        <td>Event Title</td>
        <td>When</td>
        <td>Pace</td>
        <td>Distance</td>
      </tr>
      <% @user.notified_events.active.order("start_time").each do |event| %>
        <tr>
          <td><%= link_to event.title, event_path(event) %></td>
          <td><%= event.start_time.localtime.strftime("%I:%M%p on %m/%d/%Y") %></td>
          <td><%= event.pace %>:00 min/mile</td>
          <td><%= event.route.distance %> miles</td>
        </tr>
      <% end %>
    </table>
  <% end %>

  <% if @user.events.active.any? %>
    <table>
      <h5>Created Events</h5>
      <tr>
        <td>Event Title</td>
        <td>When</td>
        <td>Pace</td>
        <td>Distance</td>
      </tr>
      <% @user.events.active.order("start_time").each do |event| %>
        <tr>
          <td><%= link_to event.title, event_path(event) %></td>
          <td><%= event.start_time.localtime.strftime("%I:%M%p on %m/%d/%Y") %></td>
          <td><%= event.pace %>:00 min/mile</td>
          <td><%= event.route.distance %> miles</td>
          <td>
            <%= link_to 'Edit', edit_event_path(event), class: 'button tiny secondary' %>
            <%= link_to 'Delete', event, method: :delete, class: 'button tiny alert' %>
          </td>
        </tr>
      <% end %>
    </table>
  <% end %>
</fieldset>
